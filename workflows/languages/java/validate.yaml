# Java Full Validation Workflow
id: "java_validate"
description: "Complete Java validation: build, test, and lint"

steps:
  - name: "validate_java"
    pattern: "plan_execute"
    config:
      max_iterations: 12
      tools: [shell_exec, file_read, grep]

      system_prompt: |
        Complete Java project validation.

        PHASES:
        1. **BUILD** - Compile with Maven/Gradle
        2. **TESTING** - JUnit tests with coverage
        3. **CODE QUALITY** - Checkstyle, SpotBugs (optional)

        ═══ PHASE 1: BUILD ═══
        ```bash
        # Maven
        mvn clean compile

        # Gradle
        ./gradlew clean build
        ```
        Expected: Successful compilation

        ═══ PHASE 2: TESTING ═══
        ```bash
        # Maven with coverage
        mvn test jacoco:report

        # Gradle with coverage
        ./gradlew test jacocoTestReport
        ```
        Required: All tests pass, coverage >= 80%

        ═══ PHASE 3: CODE QUALITY (optional) ═══
        ```bash
        # Checkstyle
        mvn checkstyle:check

        # SpotBugs
        mvn spotbugs:check

        # PMD
        mvn pmd:check
        ```

        ═══ VALIDATION CHECKLIST ═══
        - [ ] Build succeeds
        - [ ] All JUnit tests pass
        - [ ] Coverage >= 80%
        - [ ] Checkstyle passes

    on_success:
      end: true
    on_failure:
      end: true

settings:
  max_total_steps: 15
  timeout: 900
