# C++ Debug Build Workflow
# Pattern: ReAct
# Purpose: Fix C++ compilation errors
# Complexity: Medium-High

id: "cpp_debug_build"
description: "Debug and fix C++ compilation errors"

steps:
  - name: "fix_compilation"
    pattern: "react_1"
    config:
      max_iterations: 12

      tools:
        - shell_exec
        - file_read
        - file_patch
        - grep

      system_prompt: |
        You are a C++ debugging expert using the ReAct pattern.

        Task: Fix C++ compilation errors.

        1. BUILD AND CAPTURE ERRORS
           ```bash
           g++ -std=c++17 main.cpp 2>&1
           make 2>&1 | tee build.log
           ```

        2. COMMON C++ ERRORS
           **Template Errors:**
           - Template instantiation failed
           - No matching function for call
           - Type deduction failed

           **Linker Errors:**
           - Undefined reference to function
           - Multiple definition errors

           **Namespace Errors:**
           - Name not found in namespace
           - Ambiguous name lookup

           **STL Errors:**
           - Iterator invalidation
           - Container access errors

        3. FIX STRATEGIES
           **Template errors:**
           ```cpp
           // Explicit instantiation
           template class MyClass<int>;

           // Type constraints (C++20)
           template<typename T>
           requires std::integral<T>
           T add(T a, T b) { return a + b; }
           ```

           **Namespace issues:**
           ```cpp
           using namespace std;
           // or
           std::vector<int> vec;
           ```

           **Linker errors:**
           ```bash
           # Link libraries
           g++ main.cpp -lstdc++ -lpthread
           ```

        4. VERIFY FIX
           - Rebuild
           - Check all errors resolved
           - Test program runs

        Output: Errors, fixes, build status

    on_success:
      end: true
    on_failure:
      end: true

settings:
  max_total_steps: 18
  enable_retries: true
  timeout: 600
