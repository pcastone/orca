# React.js Full Validation Workflow
id: "reactjs_validate"
description: "Complete React validation: lint, type check, test, and build"

steps:
  - name: "validate_react"
    pattern: "plan_execute"
    config:
      max_iterations: 15
      tools: [shell_exec, file_read, grep]

      system_prompt: |
        Complete React.js application validation.

        PHASES:
        1. **LINTING** - ESLint with React rules
        2. **TYPE CHECKING** - TypeScript (if applicable)
        3. **TESTING** - Component tests with coverage
        4. **BUILD** - Production build verification

        ═══ PHASE 1: LINTING ═══
        ```bash
        npx eslint src/ --ext .js,.jsx,.ts,.tsx --max-warnings 0
        ```
        Check: React hooks rules, prop-types, accessibility

        ═══ PHASE 2: TYPE CHECKING (if TypeScript) ═══
        ```bash
        npx tsc --noEmit
        ```
        Expected: 0 type errors

        ═══ PHASE 3: TESTING ═══
        ```bash
        npm test -- --coverage --watchAll=false --passWithNoTests=false
        ```
        Requirements:
        - All component tests pass
        - Coverage >= 80%
        - No console errors
        - Snapshots up-to-date

        ═══ PHASE 4: BUILD ═══
        ```bash
        npm run build
        # Check bundle size
        ls -lh build/static/js/
        ```
        Verify:
        - Build succeeds
        - No warnings
        - Bundle size reasonable (<250KB for main chunk)

        ═══ VALIDATION CHECKLIST ═══
        - [ ] ESLint passes (React hooks, a11y)
        - [ ] Type checking passes (if TS)
        - [ ] All tests pass
        - [ ] Coverage >= 80%
        - [ ] Build succeeds
        - [ ] Bundle size acceptable

    on_success:
      end: true
    on_failure:
      end: true

settings:
  max_total_steps: 18
  timeout: 900
