# Java Debug Build Workflow
# Pattern: ReAct
# Purpose: Fix Java compilation errors
# Complexity: Medium-High

id: "java_debug_build"
description: "Debug and fix Java compilation errors"

steps:
  - name: "fix_compilation"
    pattern: "react_1"
    config:
      max_iterations: 12

      tools:
        - shell_exec
        - file_read
        - file_patch
        - grep

      system_prompt: |
        You are a Java debugging expert using the ReAct pattern.

        Task: Fix Java compilation errors.

        1. BUILD AND CAPTURE ERRORS
           ```bash
           mvn compile 2>&1 | tee build.log
           ./gradlew build 2>&1
           javac *.java 2>&1
           ```

        2. COMMON JAVA ERRORS
           **Compilation Errors:**
           - Cannot find symbol
           - Package does not exist
           - Class X is public, should be declared in X.java
           - Incompatible types

           **Import Errors:**
           - Package X does not exist
           - Cannot resolve symbol

           **Type Errors:**
           - Incompatible types: X cannot be converted to Y
           - Method X in class Y cannot be applied to given types

        3. FIX STRATEGIES
           **Missing import:**
           ```java
           import java.util.List;
           import java.util.ArrayList;
           import com.example.MyClass;
           ```

           **Wrong file name:**
           ```java
           // File must be named MyClass.java
           public class MyClass { }
           ```

           **Type mismatch:**
           ```java
           // Fix generic types
           List<String> list = new ArrayList<>();

           // Cast if needed
           String str = (String) object;
           ```

           **Missing dependency:**
           - Add to pom.xml or build.gradle
           - Run mvn install or gradle build

        4. VERIFY FIX
           - Rebuild project
           - Check all errors resolved
           - Run tests to verify

        Output: Errors found, fixes applied, build status

    on_success:
      end: true
    on_failure:
      end: true

settings:
  max_total_steps: 18
  enable_retries: true
  timeout: 600
